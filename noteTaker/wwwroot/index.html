 <!DOCTYPE html>
<html>
<head>
<title>Note manager</title>
</head>
<style>
    table,th, td{
        border:1px solid black;
    }
</style>
<body>
    <h1>Note manager</h1>
    <h4>View Notes</h4>
    <div id="TaskContainer">
        <!--  append tasks here for test  -->
    </div>

    <table id="=" TaskTable>
        <tr id="tableVariables">
            <th>ID</th>
            <th>Title</th>
            <th>Note</th>
        </tr>
    </table>

    <hr />
    <form>
        <h4>New Note</h4>
        <label for="fTitle">Note title </label><br>
        <input type="text" id="noteTitleInput" name="fname" value="Note Title"><br>
        <label for="fText">Note Text</label><br>
        <textarea id="noteTextInput" cols="50" rows="4">Note description goes here...</textarea>
        <button type="button" id="newNoteBtn">Submit</button>
        
    </form>

    <hr />

    <h4>Delete Note</h4>


    <script>
        document.getElementById("newNoteBtn").addEventListener("click", postNewNote);

        const app = document.getElementById('app');
        const apiUrl = 'https://localhost:7013/api/note/getNote'
        var taskContainer = document.getElementById("TaskContainer");

        // Reformat this, works for now
        async function getTaskData() {
            const response = await fetch(apiUrl);
            const data = await response.json();
            const dataParsed = JSON.stringify(data);

            var tasksTable = document.getElementById("TaskTable");

            console.log(data);
            console.log(dataParsed);

            // HTML VIEW DATA
            for (let i in data) {
                var taskString = "Task id: " + data[i]["id"] + "  |  " + data[i]["title"] + ": " + data[i]["noteText"];
                var nParagraph = document.createElement('p');
                nParagraph.setAttribute("style", "border: 0.5px solid black;");
                nParagraph.innerHTML = taskString;
                TaskContainer.appendChild(nParagraph);
            }

        }

        async function postNewNote() {
            console.log("BUTTON")
            var postData = JSON.stringify({
                "id": 0,
                "title": document.getElementById("noteTitleInput").value,
                "noteText": document.getElementById("noteTextInput").value
            });
            fetch('/api/note/postNote', {
                method: "POST",
                headers: {
                    'Content-Type': 'application/json'
                },
                body: postData
            })
                .then(response => response.json())
                .then(json => console.log())
                .catch(error => console.log(error))
            alert("DATA ADDED");


        }


        getTaskData();
        

    </script>

</body>
</html> 